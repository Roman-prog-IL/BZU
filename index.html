<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>–ë–ñ–£ ‚Äî –ø–æ—Ä—Ü–∏–∏</title>
<style>
body{margin:0;font-family:-apple-system,system-ui;background:#0b0f14;color:#e6edf3}
.wrap{max-width:720px;margin:auto;padding:16px}
.card{background:#111826;border:1px solid #223044;border-radius:16px;padding:14px;margin-bottom:12px}
h1,h2{margin:0 0 10px}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
input,select,button{background:#0b1220;color:#e6edf3;border:1px solid #223044;border-radius:12px;padding:10px 12px;font-size:16px}
button{cursor:pointer}
.primary{background:#1f6feb;border-color:#1f6feb}
.danger{background:#b42318;border-color:#b42318}
.pill{padding:8px 12px;border:1px solid #223044;border-radius:999px}
.big{font-size:22px;font-weight:700}
.sep{height:1px;background:#223044;margin:10px 0}
</style>
</head>
<body>

<div class="wrap">
<h1>–ë–ñ–£ / –ü–æ—Ä—Ü–∏–∏</h1>

<div class="card">
<h2>–ò—Ç–æ–≥–∏</h2>
<div class="row">
<span class="pill">üçΩÔ∏è –°—ä–µ–ª: <b id="inK">0</b> –∫–∫–∞–ª</span>
<span class="pill">üî• –°–æ–∂–∂–µ–Ω–æ: <b id="burnK">0</b> –∫–∫–∞–ª</span>
<span class="pill">‚öñÔ∏è –ë–∞–ª–∞–Ω—Å: <b id="netK">0</b> –∫–∫–∞–ª</span>
<span class="pill">üíß –í–æ–¥–∞: <b id="water">0</b> –º–ª</span>
</div>
<div class="sep"></div>
<div class="row">
<span class="pill">–ë <b id="p">0</b> –≥</span>
<span class="pill">–ñ <b id="f">0</b> –≥</span>
<span class="pill">–£ <b id="c">0</b> –≥</span>
</div>
</div>

<div class="card">
<h2>–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏—ë–º</h2>
<div class="row">
<select id="food"></select>
<input id="qty" type="number" step="0.5" placeholder="–ø–æ—Ä—Ü–∏–∏">
<button class="primary" onclick="add()">–î–æ–±–∞–≤–∏—Ç—å</button>
</div>
</div>

<div class="card">
<h2>–í–æ–¥–∞</h2>
<div class="row">
<button onclick="waterAdd(200)">+200</button>
<button onclick="waterAdd(300)">+300</button>
<button onclick="waterAdd(500)">+500</button>
<button class="danger" onclick="water=0;save()">–°–±—Ä–æ—Å</button>
</div>
</div>

<div class="card">
<h2>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</h2>
<div class="row">
<input id="burnInput" type="number" placeholder="–∫–∫–∞–ª">
<button onclick="addBurn()">–î–æ–±–∞–≤–∏—Ç—å</button>
</div>
</div>

<div class="card">
<h2>–ü—Ä–æ–¥—É–∫—Ç—ã (–∑–∞ 1 –ø–æ—Ä—Ü–∏—é)</h2>
<div class="row">
<input id="n" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ">
<input id="pp" type="number" placeholder="–ë">
<input id="ff" type="number" placeholder="–ñ">
<input id="cc" type="number" placeholder="–£">
<button class="primary" onclick="addFood()">–î–æ–±–∞–≤–∏—Ç—å</button>
</div>
</div>

</div>

<script>
let foods = JSON.parse(localStorage.foods||'[]');
let log = JSON.parse(localStorage.log||'[]');
let water = +localStorage.water||0;
let burn = +localStorage.burn||0;

function save(){
localStorage.foods=JSON.stringify(foods);
localStorage.log=JSON.stringify(log);
localStorage.water=water;
localStorage.burn=burn;
render();
}

function kcal(p,f,c){return p*4+f*9+c*4}

function render(){
let P=0,F=0,C=0,K=0;
log.forEach(e=>{P+=e.p;F+=e.f;C+=e.c;K+=e.k});
p.textContent=P.toFixed(1);
f.textContent=F.toFixed(1);
c.textContent=C.toFixed(1);
inK.textContent=Math.round(K);
burnK.textContent=burn;
netK.textContent=Math.round(K-burn);
water.textContent=water;

food.innerHTML='';
foods.forEach((f,i)=>{
let o=document.createElement('option');
o.value=i;o.textContent=f.name;
food.appendChild(o);
});
}

function add(){
let f=foods[food.value];
let q=+qty.value||0;
if(!f||q<=0)return;
log.push({p:f.p*q,f:f.f*q,c:f.c*q,k:kcal(f.p*q,f.f*q,f.c*q)});
qty.value='';
save();
}

function addFood(){
foods.push({name:n.value,p:+pp.value,f:+ff.value,c:+cc.value});
n.value=pp.value=ff.value=cc.value='';
save();
}

function waterAdd(x){water+=x;save()}
function addBurn(){burn+=+burnInput.value||0;burnInput.value='';save()}

render();
</script>
</body>
</html>
